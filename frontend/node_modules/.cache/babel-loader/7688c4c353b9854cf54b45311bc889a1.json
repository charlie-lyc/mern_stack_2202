{"ast":null,"code":"import _toConsumableArray from\"/Users/charlie/Documents/YouTube/BradTraversy/mern_stack_2202/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/charlie/Documents/YouTube/BradTraversy/mern_stack_2202/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/charlie/Documents/YouTube/BradTraversy/mern_stack_2202/frontend/node_modules/@babel/runtime/regenerator/index.js\";import{createAsyncThunk,createSlice}from'@reduxjs/toolkit';import{read,create,remove,update}from'./goalsAPI';export var readGoals=createAsyncThunk('goals/fetchGoals',/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_,thunkAPI){var userToken,res,message;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;userToken=thunkAPI.getState().auth.user.token;_context.next=4;return read(userToken);case 4:res=_context.sent;return _context.abrupt(\"return\",res.data.reverse());case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);message=_context.t0.response.data.message||_context.t0.message||_context.t0.toString();return _context.abrupt(\"return\",thunkAPI.rejectWithValue(message));case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}());// export const createGoal = createAsyncThunk(\n//     'goals/createGoal',\n//     async ({ goalData, token }, thunkAPI) => {\n//         try {\n//             const res = await create(goalData, token)\n//             return res.data\n//         } catch (error) {\n//             const message = error.response.data.message || error.message || error.toString()\n//             return thunkAPI.rejectWithValue(message)\n//         }\n//     }\n// )\n/////////////////////////////////////////////////////////////////\nexport var createGoal=createAsyncThunk('goals/createGoal',/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(goalData,thunkAPI){var userToken,res,message;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;userToken=thunkAPI.getState().auth.user.token;_context2.next=4;return create(goalData,userToken);case 4:res=_context2.sent;return _context2.abrupt(\"return\",res.data);case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);message=_context2.t0.response.data.message||_context2.t0.message||_context2.t0.toString();return _context2.abrupt(\"return\",thunkAPI.rejectWithValue(message));case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}());export var deleteGoal=createAsyncThunk('goals/destroyGoal',/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(goalId,thunkAPI){var userToken,res,message;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;userToken=thunkAPI.getState().auth.user.token;_context3.next=4;return remove(goalId,userToken);case 4:res=_context3.sent;return _context3.abrupt(\"return\",res.data);case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](0);message=_context3.t0.response.data.message||_context3.t0.message||_context3.t0.toString();return _context3.abrupt(\"return\",thunkAPI.rejectWithValue(message));case 12:case\"end\":return _context3.stop();}}},_callee3,null,[[0,8]]);}));return function(_x5,_x6){return _ref3.apply(this,arguments);};}());export var updateGoal=createAsyncThunk('goals/updateGoal',/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(_ref4,thunkAPI){var goalId,goalData,userToken,res,message;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:goalId=_ref4.goalId,goalData=_ref4.goalData;_context4.prev=1;userToken=thunkAPI.getState().auth.user.token;_context4.next=5;return update(goalId,goalData,userToken);case 5:res=_context4.sent;return _context4.abrupt(\"return\",res.data);case 9:_context4.prev=9;_context4.t0=_context4[\"catch\"](1);message=_context4.t0.response.data.message||_context4.t0.message||_context4.t0.toString();return _context4.abrupt(\"return\",thunkAPI.rejectWithValue(message));case 13:case\"end\":return _context4.stop();}}},_callee4,null,[[1,9]]);}));return function(_x7,_x8){return _ref5.apply(this,arguments);};}());var initialState={items:[],message:'',isLoading:false,isSuccess:false,isError:false};export var goalsSlice=createSlice({name:'goals',initialState:initialState,reducers:{reset:function reset(state){state.message='';state.isLoading=false;state.isSuccess=false;state.isError=false;},deletedItems:function deletedItems(state){state.items=[];}},extraReducers:function extraReducers(build){build.addCase(readGoals.pending,function(state){state.isLoading=true;}).addCase(readGoals.fulfilled,function(state,action){state.isLoading=false;state.isSuccess=true;state.items=action.payload;}).addCase(readGoals.rejected,function(state,action){state.isLoading=false;state.isError=true;state.message=action.payload;});build.addCase(createGoal.pending,function(state){state.isLoading=true;}).addCase(createGoal.fulfilled,function(state,action){state.isLoading=false;state.isSuccess=true;// state.items.unshift(action.payload)\n////////////////////////////////////////////////\nstate.items=[action.payload].concat(_toConsumableArray(state.items));}).addCase(createGoal.rejected,function(state,action){state.isLoading=false;state.isError=true;state.message=action.payload;});build.addCase(deleteGoal.pending,function(state){state.isLoading=true;}).addCase(deleteGoal.fulfilled,function(state,action){state.isLoading=false;state.isSuccess=true;state.items=state.items.filter(function(item){return item.id!==action.payload.id;});}).addCase(deleteGoal.rejected,function(state,action){state.isLoading=false;state.isError=true;state.message=action.payload;});build.addCase(updateGoal.pending,function(state){state.isLoading=true;}).addCase(updateGoal.fulfilled,function(state,action){state.isLoading=false;state.isSuccess=true;state.items=state.items.map(function(item){return item.id===action.payload.id?action.payload:item;});}).addCase(updateGoal.rejected,function(state,action){state.isLoading=false;state.isError=true;state.message=action.payload;});}});var _goalsSlice$actions=goalsSlice.actions,reset=_goalsSlice$actions.reset,deletedItems=_goalsSlice$actions.deletedItems;export{reset,deletedItems};export var selectGoals=function selectGoals(state){return state.goals;};export default goalsSlice.reducer;","map":{"version":3,"sources":["/Users/charlie/Documents/YouTube/BradTraversy/mern_stack_2202/frontend/src/features/goals/goalsSlice.js"],"names":["createAsyncThunk","createSlice","read","create","remove","update","readGoals","_","thunkAPI","userToken","getState","auth","user","token","res","data","reverse","message","response","toString","rejectWithValue","createGoal","goalData","deleteGoal","goalId","updateGoal","initialState","items","isLoading","isSuccess","isError","goalsSlice","name","reducers","reset","state","deletedItems","extraReducers","build","addCase","pending","fulfilled","action","payload","rejected","filter","item","id","map","actions","selectGoals","goals","reducer"],"mappings":"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","sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit'\nimport { read, create, remove, update } from './goalsAPI'\n\n\nexport const readGoals = createAsyncThunk(\n    'goals/fetchGoals',\n    async (_, thunkAPI) => {\n        try {\n            const userToken = thunkAPI.getState().auth.user.token\n            const res = await read(userToken)\n            return res.data.reverse()\n        } catch (error) {\n            const message = error.response.data.message || error.message || error.toString()\n            return thunkAPI.rejectWithValue(message)\n        }\n    }\n)\n\n// export const createGoal = createAsyncThunk(\n//     'goals/createGoal',\n//     async ({ goalData, token }, thunkAPI) => {\n//         try {\n//             const res = await create(goalData, token)\n//             return res.data\n//         } catch (error) {\n//             const message = error.response.data.message || error.message || error.toString()\n//             return thunkAPI.rejectWithValue(message)\n//         }\n//     }\n// )\n/////////////////////////////////////////////////////////////////\nexport const createGoal = createAsyncThunk(\n    'goals/createGoal',\n    async (goalData, thunkAPI) => {\n        try {\n            const userToken = thunkAPI.getState().auth.user.token\n            const res = await create(goalData, userToken)\n            return res.data\n        } catch (error) {\n            const message = error.response.data.message || error.message || error.toString()\n            return thunkAPI.rejectWithValue(message)\n        }\n    }\n)\n\nexport const deleteGoal = createAsyncThunk(\n    'goals/destroyGoal',\n    async (goalId, thunkAPI) => {\n        try {\n            const userToken = thunkAPI.getState().auth.user.token\n            const res = await remove(goalId, userToken)\n            return res.data\n        } catch (error) {\n            const message = error.response.data.message || error.message || error.toString()\n            return thunkAPI.rejectWithValue(message)\n        }\n    }\n)\n\nexport const updateGoal = createAsyncThunk(\n    'goals/updateGoal',\n    async ({ goalId, goalData }, thunkAPI) => {\n        try {\n            const userToken = thunkAPI.getState().auth.user.token\n            const res = await update(goalId, goalData, userToken)\n            return res.data\n        } catch (error) {\n            const message = error.response.data.message || error.message || error.toString()\n            return thunkAPI.rejectWithValue(message)\n        }\n    }\n)\n\n\nconst initialState = {\n    items: [],\n    message: '',\n    isLoading: false,\n    isSuccess: false,\n    isError: false\n}\n\nexport const goalsSlice = createSlice({\n    name: 'goals',\n    initialState,\n    reducers: {\n        reset: state => {\n            state.message = ''\n            state.isLoading = false\n            state.isSuccess = false\n            state.isError = false\n        },\n        deletedItems: state => {\n            state.items = []\n        }\n    },\n    extraReducers: build => {\n        build.addCase(readGoals.pending, state => {\n                state.isLoading = true\n            }).addCase(readGoals.fulfilled, (state, action) => {\n                state.isLoading = false\n                state.isSuccess = true\n                state.items = action.payload\n            }).addCase(readGoals.rejected, (state, action) => {\n                state.isLoading = false\n                state.isError = true\n                state.message = action.payload\n            })\n        build.addCase(createGoal.pending, state => {\n                state.isLoading = true\n            }).addCase(createGoal.fulfilled, (state, action) => {\n                state.isLoading = false\n                state.isSuccess = true\n                // state.items.unshift(action.payload)\n                ////////////////////////////////////////////////\n                state.items = [ action.payload, ...state.items ]\n            }).addCase(createGoal.rejected, (state, action) => {\n                state.isLoading = false\n                state.isError = true\n                state.message = action.payload\n            })\n        build.addCase(deleteGoal.pending, state => {\n                state.isLoading = true\n            }).addCase(deleteGoal.fulfilled, (state, action) => {\n                state.isLoading = false\n                state.isSuccess = true\n                state.items = state.items.filter(item => item.id !== action.payload.id )\n            }).addCase(deleteGoal.rejected, (state, action) => {\n                state.isLoading = false\n                state.isError = true\n                state.message = action.payload\n            })\n        build.addCase(updateGoal.pending, state => {\n                state.isLoading = true\n            }).addCase(updateGoal.fulfilled, (state, action) => {\n                state.isLoading = false\n                state.isSuccess = true\n                state.items = state.items.map(item => item.id === action.payload.id ? action.payload : item )\n            }).addCase(updateGoal.rejected, (state, action) => {\n                state.isLoading = false\n                state.isError = true\n                state.message = action.payload\n            })\n    }\n})\n\nexport const { reset, deletedItems } = goalsSlice.actions\n\nexport const selectGoals = state => state.goals\n\nexport default goalsSlice.reducer"]},"metadata":{},"sourceType":"module"}